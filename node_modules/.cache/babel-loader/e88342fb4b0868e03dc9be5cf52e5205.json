{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tgound\\\\Desktop\\\\NCKH\\\\Web1\\\\frontend\\\\src\\\\comments\\\\Comment.js\";\nimport CommentForm from \"./CommentForm\";\nimport { format } from 'timeago.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Comment = ({\n  comment,\n  replies,\n  setActiveComment,\n  activeComment,\n  updateComment,\n  deleteComment,\n  addComment,\n  parentId = null,\n  currentUserId\n}) => {\n  const isEditing = activeComment && activeComment.id === comment.id && activeComment.type === \"editing\";\n  const isReplying = activeComment && activeComment.id === comment.id && activeComment.type === \"replying\";\n  const fiveMinutes = 300000;\n  const timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\n  const canDelete = currentUserId === comment.userId && replies.length === 0 && !timePassed;\n  const canReply = Boolean(currentUserId);\n  const canEdit = currentUserId === comment.userId && !timePassed;\n  const replyId = parentId ? parentId : comment.id;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"comment\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-image-container\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"comment__avatar\",\n        alt: \"\",\n        src: \"https://www.thesprucepets.com/thmb/sfuyyLvyUx636_Oq3Fw5_mt-PIc=/3760x2820/smart/filters:no_upscale()/adorable-white-pomeranian-puppy-spitz-921029690-5c8be25d46e0fb000172effe.jpg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comment-right-part\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-author\",\n          children: [\" \", comment.username, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", format(comment.createdAt), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-text\",\n        children: [\" \", comment.body, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 24\n      }, this), isEditing && /*#__PURE__*/_jsxDEV(CommentForm, {\n        submitLabel: \"C\\u1EADp nh\\u1EADt\",\n        hasCancelButton: true,\n        initialText: comment.body,\n        handleSubmit: text => updateComment(text, comment.id),\n        handleCancel: () => {\n          setActiveComment(null);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment-actions\",\n        children: [canReply && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-action\",\n          onClick: () => setActiveComment({\n            id: comment.id,\n            type: \"replying\"\n          }),\n          children: [\"Ph\\u1EA3n h\\u1ED3i\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), canEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-action\",\n          onClick: () => setActiveComment({\n            id: comment.id,\n            type: \"editing\"\n          }),\n          children: \"S\\u1EEDa\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), canDelete && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-action\",\n          onClick: () => deleteComment(comment.id),\n          children: \"X\\xF3a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), isReplying && /*#__PURE__*/_jsxDEV(CommentForm, {\n        submitLabel: \"Tr\\u1EA3 l\\u1EDDi\",\n        handleSubmit: text => addComment(text, replyId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), replies.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"replies\",\n        children: replies.map(reply => /*#__PURE__*/_jsxDEV(Comment, {\n          comment: reply,\n          setActiveComment: setActiveComment,\n          activeComment: activeComment,\n          updateComment: updateComment,\n          deleteComment: deleteComment,\n          addComment: addComment,\n          parentId: comment.id,\n          replies: [],\n          currentUserId: currentUserId\n        }, reply.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)]\n  }, comment.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["C:/Users/tgound/Desktop/NCKH/Web1/frontend/src/comments/Comment.js"],"names":["CommentForm","format","Comment","comment","replies","setActiveComment","activeComment","updateComment","deleteComment","addComment","parentId","currentUserId","isEditing","id","type","isReplying","fiveMinutes","timePassed","Date","createdAt","canDelete","userId","length","canReply","Boolean","canEdit","replyId","username","body","text","map","reply"],"mappings":";AAAA,OAAOA,WAAP,MAAwB,eAAxB;AACA,SAASC,MAAT,QAAuB,YAAvB;;;AACA,MAAMC,OAAO,GAAG,CAAC;AACfC,EAAAA,OADe;AAEfC,EAAAA,OAFe;AAGfC,EAAAA,gBAHe;AAIfC,EAAAA,aAJe;AAKfC,EAAAA,aALe;AAMfC,EAAAA,aANe;AAOfC,EAAAA,UAPe;AAQfC,EAAAA,QAAQ,GAAG,IARI;AASfC,EAAAA;AATe,CAAD,KAUV;AACJ,QAAMC,SAAS,GACbN,aAAa,IACbA,aAAa,CAACO,EAAd,KAAqBV,OAAO,CAACU,EAD7B,IAEAP,aAAa,CAACQ,IAAd,KAAuB,SAHzB;AAIA,QAAMC,UAAU,GACdT,aAAa,IACbA,aAAa,CAACO,EAAd,KAAqBV,OAAO,CAACU,EAD7B,IAEAP,aAAa,CAACQ,IAAd,KAAuB,UAHzB;AAIA,QAAME,WAAW,GAAG,MAApB;AACA,QAAMC,UAAU,GAAG,IAAIC,IAAJ,KAAa,IAAIA,IAAJ,CAASf,OAAO,CAACgB,SAAjB,CAAb,GAA2CH,WAA9D;AACA,QAAMI,SAAS,GACbT,aAAa,KAAKR,OAAO,CAACkB,MAA1B,IAAoCjB,OAAO,CAACkB,MAAR,KAAmB,CAAvD,IAA4D,CAACL,UAD/D;AAEA,QAAMM,QAAQ,GAAGC,OAAO,CAACb,aAAD,CAAxB;AACA,QAAMc,OAAO,GAAGd,aAAa,KAAKR,OAAO,CAACkB,MAA1B,IAAoC,CAACJ,UAArD;AACA,QAAMS,OAAO,GAAGhB,QAAQ,GAAGA,QAAH,GAAcP,OAAO,CAACU,EAA9C;AAGA,sBACE;AAAsB,IAAA,SAAS,EAAC,SAAhC;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,6BACE;AACE,QAAA,SAAS,EAAC,iBADZ;AAEE,QAAA,GAAG,EAAC,EAFN;AAGE,QAAA,GAAG,EAAC;AAHN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAQE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,0BAAkCV,OAAO,CAACwB,QAA1C;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAA,0BAAO1B,MAAM,CAACE,OAAO,CAACgB,SAAT,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAKG,CAACP,SAAD,iBAAc;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,wBAAgCT,OAAO,CAACyB,IAAxC;AAAA;AAAA;AAAA;AAAA;AAAA,cALjB,EAMGhB,SAAS,iBACR,QAAC,WAAD;AACE,QAAA,WAAW,EAAC,oBADd;AAEE,QAAA,eAAe,MAFjB;AAGE,QAAA,WAAW,EAAET,OAAO,CAACyB,IAHvB;AAIE,QAAA,YAAY,EAAGC,IAAD,IAAUtB,aAAa,CAACsB,IAAD,EAAO1B,OAAO,CAACU,EAAf,CAJvC;AAKE,QAAA,YAAY,EAAE,MAAM;AAClBR,UAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD;AAPH;AAAA;AAAA;AAAA;AAAA,cAPJ,eAiBE;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,mBACGkB,QAAQ,iBACP;AACE,UAAA,SAAS,EAAC,gBADZ;AAEE,UAAA,OAAO,EAAE,MACPlB,gBAAgB,CAAC;AACfQ,YAAAA,EAAE,EAAEV,OAAO,CAACU,EADG;AAEfC,YAAAA,IAAI,EAAE;AAFS,WAAD,CAHpB;AAAA,2CASW,GATX;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAcGW,OAAO,iBACN;AACE,UAAA,SAAS,EAAC,gBADZ;AAEE,UAAA,OAAO,EAAE,MACPpB,gBAAgB,CAAC;AACfQ,YAAAA,EAAE,EAAEV,OAAO,CAACU,EADG;AAEfC,YAAAA,IAAI,EAAE;AAFS,WAAD,CAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAfJ,EA2BGM,SAAS,iBACR;AACE,UAAA,SAAS,EAAC,gBADZ;AAEE,UAAA,OAAO,EAAE,MAAMZ,aAAa,CAACL,OAAO,CAACU,EAAT,CAF9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA5BJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAjBF,EAqDGE,UAAU,iBACT,QAAC,WAAD;AACE,QAAA,WAAW,EAAC,mBADd;AAEE,QAAA,YAAY,EAAGc,IAAD,IAAUpB,UAAU,CAACoB,IAAD,EAAOH,OAAP;AAFpC;AAAA;AAAA;AAAA;AAAA,cAtDJ,EA2DGtB,OAAO,CAACkB,MAAR,GAAiB,CAAjB,iBACC;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA,kBACGlB,OAAO,CAAC0B,GAAR,CAAaC,KAAD,iBACX,QAAC,OAAD;AACE,UAAA,OAAO,EAAEA,KADX;AAGE,UAAA,gBAAgB,EAAE1B,gBAHpB;AAIE,UAAA,aAAa,EAAEC,aAJjB;AAKE,UAAA,aAAa,EAAEC,aALjB;AAME,UAAA,aAAa,EAAEC,aANjB;AAOE,UAAA,UAAU,EAAEC,UAPd;AAQE,UAAA,QAAQ,EAAEN,OAAO,CAACU,EARpB;AASE,UAAA,OAAO,EAAE,EATX;AAUE,UAAA,aAAa,EAAEF;AAVjB,WAEOoB,KAAK,CAAClB,EAFb;AAAA;AAAA;AAAA;AAAA,gBADD;AADH;AAAA;AAAA;AAAA;AAAA,cA5DJ;AAAA;AAAA;AAAA;AAAA;AAAA,YARF;AAAA,KAAUV,OAAO,CAACU,EAAlB;AAAA;AAAA;AAAA;AAAA,UADF;AAyFD,CArHD;;KAAMX,O;AAuHN,eAAeA,OAAf","sourcesContent":["import CommentForm from \"./CommentForm\";\r\nimport { format } from 'timeago.js'\r\nconst Comment = ({\r\n  comment,\r\n  replies,\r\n  setActiveComment,\r\n  activeComment,\r\n  updateComment,\r\n  deleteComment,\r\n  addComment,\r\n  parentId = null,\r\n  currentUserId,\r\n}) => {\r\n  const isEditing =\r\n    activeComment &&\r\n    activeComment.id === comment.id &&\r\n    activeComment.type === \"editing\";\r\n  const isReplying =\r\n    activeComment &&\r\n    activeComment.id === comment.id &&\r\n    activeComment.type === \"replying\";\r\n  const fiveMinutes = 300000;\r\n  const timePassed = new Date() - new Date(comment.createdAt) > fiveMinutes;\r\n  const canDelete =\r\n    currentUserId === comment.userId && replies.length === 0 && !timePassed;\r\n  const canReply = Boolean(currentUserId);\r\n  const canEdit = currentUserId === comment.userId && !timePassed;\r\n  const replyId = parentId ? parentId : comment.id;\r\n\r\n\r\n  return (\r\n    <div key={comment.id} className=\"comment\">\r\n      <div className=\"comment-image-container\">\r\n        <img\r\n          className=\"comment__avatar\"\r\n          alt=\"\"\r\n          src=\"https://www.thesprucepets.com/thmb/sfuyyLvyUx636_Oq3Fw5_mt-PIc=/3760x2820/smart/filters:no_upscale()/adorable-white-pomeranian-puppy-spitz-921029690-5c8be25d46e0fb000172effe.jpg\"\r\n        />\r\n      </div>\r\n      <div className=\"comment-right-part\">\r\n        <div className=\"comment-content\">\r\n          <div className=\"comment-author\"> {comment.username} </div>\r\n          <div> {format(comment.createdAt)} </div>\r\n        </div>\r\n        {!isEditing && <div className=\"comment-text\"> {comment.body} </div>}\r\n        {isEditing && (\r\n          <CommentForm\r\n            submitLabel=\"Cập nhật\"\r\n            hasCancelButton\r\n            initialText={comment.body}\r\n            handleSubmit={(text) => updateComment(text, comment.id)}\r\n            handleCancel={() => {\r\n              setActiveComment(null);\r\n            }}\r\n          />\r\n        )}\r\n        <div className=\"comment-actions\">\r\n          {canReply && (\r\n            <div\r\n              className=\"comment-action\"\r\n              onClick={() =>\r\n                setActiveComment({\r\n                  id: comment.id,\r\n                  type: \"replying\",\r\n                })\r\n              }\r\n            >\r\n              Phản hồi{\" \"}\r\n            </div>\r\n          )}\r\n          {canEdit && (\r\n            <div\r\n              className=\"comment-action\"\r\n              onClick={() =>\r\n                setActiveComment({\r\n                  id: comment.id,\r\n                  type: \"editing\",\r\n                })\r\n              }\r\n            >\r\n              Sửa\r\n            </div>\r\n          )}\r\n          {canDelete && (\r\n            <div\r\n              className=\"comment-action\"\r\n              onClick={() => deleteComment(comment.id)}\r\n            >\r\n              Xóa\r\n            </div>\r\n          )}\r\n        </div>\r\n        {isReplying && (\r\n          <CommentForm\r\n            submitLabel=\"Trả lời\"\r\n            handleSubmit={(text) => addComment(text, replyId)}\r\n          />\r\n        )}\r\n        {replies.length > 0 && (\r\n          <div className=\"replies\">\r\n            {replies.map((reply) => (\r\n              <Comment\r\n                comment={reply}\r\n                key={reply.id}\r\n                setActiveComment={setActiveComment}\r\n                activeComment={activeComment}\r\n                updateComment={updateComment}\r\n                deleteComment={deleteComment}\r\n                addComment={addComment}\r\n                parentId={comment.id}\r\n                replies={[]}\r\n                currentUserId={currentUserId}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n"]},"metadata":{},"sourceType":"module"}