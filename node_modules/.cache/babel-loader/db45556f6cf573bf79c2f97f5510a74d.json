{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tgound\\\\Desktop\\\\NCKH\\\\Web1\\\\frontend\\\\src\\\\components\\\\Header\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { loginStart, loginSuccess, loginFailure, logout } from \"../../redux/userSlice\";\nimport \"./index.css\";\nimport { Modal } from \"../Modal\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nrequire(\"dotenv\").config();\n\nexport const Header = ({\n  isOpenModal,\n  setIsOpenModal\n}) => {\n  _s();\n\n  const {\n    currentUser\n  } = useSelector(state => state.user);\n  const [isActiveHeader, setIsActiveHeader] = useState(false);\n  const [tabActive, setTabActive] = useState(0);\n  const lineRef = useRef(null);\n  const loginRef = useRef(null);\n  const {\n    pathname\n  } = useLocation();\n\n  function handleOnScroll() {\n    if (this.scrollY > 120) {\n      setIsActiveHeader(true);\n    } else {\n      setIsActiveHeader(false);\n    }\n  }\n\n  const handleActiveTab = (e, index) => {\n    setTabActive(index);\n    lineRef.current.style.left = e.target.offsetLeft + \"px\";\n    lineRef.current.style.width = e.target.offsetWidth + \"px\";\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleOnScroll);\n    return () => window.removeEventListener(\"scroll\", handleOnScroll);\n  }, []);\n  useEffect(() => {\n    if (lineRef.current) {\n      lineRef.current.style.left = loginRef.current.offsetLeft + \"px\";\n      lineRef.current.style.width = loginRef.current.offsetWidth + \"px\";\n    }\n  }, [isOpenModal]); // *Code for LOGIN\n\n  const history = useHistory();\n  const [email, setEmail] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [error, setError] = useState(false);\n  const dispatch = useDispatch();\n\n  const loginHandler = async e => {\n    e.preventDefault();\n    dispatch(loginStart());\n    console.log(\"Getting information from input\");\n\n    try {\n      const config = {\n        headers: {\n          \"Content-type\": \"application/json\"\n        }\n      };\n      const {\n        data\n      } = await axios.post(\"/api/users/login\", {\n        email,\n        password\n      }, config);\n      console.log(\"Login successful, User information: \");\n      setIsOpenModal(false);\n      dispatch(loginSuccess(data));\n      history.push(\"/\");\n      console.log(data); // localStorage.setItem(\"userInfo\", JSON.stringify(data));\n    } catch (error) {\n      console.log(error);\n      setError(\"Email hoặc mật khẩu không đúng, vui lòng thử lại\");\n      dispatch(loginFailure());\n      console.log(\"User not found, please check again or register\");\n    }\n  }; // *Code for REGISTER\n\n\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n\n  function CheckPassword(inputPassword) {\n    if (inputPassword.length < 8) {\n      setError(\"Mật khẩu của bạn phải có độ dài từ 8 ký tự trở lên\");\n      console.log(\"Your password must be at least 8 characters\");\n      return false;\n    }\n\n    if (inputPassword.search(/[a-z]/i) < 0) {\n      setError(\"Mật khẩu của bạn phải có ít nhất một chữ cái\");\n      console.log(\"Your password must contain at least one letter.\");\n      return false;\n    }\n\n    if (inputPassword.search(/[0-9]/) < 0) {\n      setError(\"Mật khẩu của bạn phải có ít nhất một con số\");\n      console.log(\"Your password must contain at least one digit.\");\n      return false;\n    }\n\n    if (inputPassword.search(/[!@#$%^&*]/) > 0) {\n      setError(\"Mật khẩu của bạn không được chứa kí tự đặc biệt\");\n      console.log(\"Your password mustn't contain special character\");\n      return false;\n    } else return true;\n  }\n\n  const registerHandler = async e => {\n    e.preventDefault();\n\n    if (CheckPassword(password)) {\n      if (password !== confirmPassword) {\n        setError(\"Mật khẩu không khớp, vui lòng thử lại\");\n        console.log(\"Register failed because password not match\");\n      } else {\n        setError(null);\n\n        try {\n          const config = {\n            headers: {\n              \"Content-type\": \"application/json\"\n            }\n          };\n          const {\n            data\n          } = await axios.post(\"/api/users\", {\n            name,\n            email,\n            password,\n            verified: false\n          }, config);\n          console.log(\"Register successful\");\n          history.push(\"/\");\n          alert(\"Một email đã được gửi đến hộp thư của bạn, vui lòng kiểm tra và kích hoạt tài khoản\"); // setIsLogin(true);\n\n          setIsOpenModal(false);\n          console.log(data);\n          localStorage.setItem(\"userInfo\", JSON.stringify(data));\n        } catch (err) {\n          console.log(err);\n          console.log(\"Register failed\");\n        }\n      }\n    } else {\n      console.log(\"Password requirement not meet\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isOpenModal,\n      stateOpenModal: setIsOpenModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal__wrap-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tabs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab-item ${tabActive === 0 ? \"active\" : \"\"}`,\n            onClick: e => handleActiveTab(e, 0),\n            ref: loginRef,\n            children: \"\\u0110\\u0103ng nh\\u1EADp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `tab-item ${tabActive === 1 ? \"active\" : \"\"}`,\n            onClick: e => handleActiveTab(e, 1),\n            children: \"\\u0110\\u0103ng k\\xFD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"line\",\n            ref: lineRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"panes\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loginContainer\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: loginHandler,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `pane-item ${tabActive === 0 ? \"active\" : \"\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"email\",\n                    className: \"form-label\",\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: true,\n                    type: \"email\",\n                    className: \"form-control\",\n                    id: \"email\",\n                    placeholder: \"Nh\\u1EADp email c\\u1EE7a b\\u1EA1n\",\n                    onChange: e => setEmail(e.target.value),\n                    value: email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"password\",\n                    className: \"form-label\",\n                    children: \"M\\u1EADt kh\\u1EA9u\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      required: true,\n                      type: \"password\",\n                      className: \"form-control password\",\n                      placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u c\\u1EE7a b\\u1EA1n\",\n                      onChange: e => setPassword(e.target.value),\n                      value: password\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 205,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/forgot-password\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"forget-password\",\n                    children: \"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"wrap-btn-login\",\n                  children: [error !== \"\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"error\",\n                    children: error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 37\n                  }, this) : \"\", /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-login\",\n                    varian: \"primary\",\n                    type: \"submit\",\n                    children: \"\\u0110\\u0103ng nh\\u1EADp\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"registerContainer\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: registerHandler,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `pane-item ${tabActive === 1 ? \"active\" : \"\"}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"\",\n                    className: \"form-label\",\n                    children: \"T\\xEAn ng\\u01B0\\u1EDDi d\\xF9ng\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: true,\n                    type: \"text\",\n                    id: \"username\",\n                    placeholder: \"Nh\\u1EADp t\\xEAn t\\xE0i kho\\u1EA3n c\\u1EE7a b\\u1EA1n\",\n                    className: \"form-control\",\n                    onChange: e => setName(e.target.value),\n                    value: name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"email\",\n                    className: \"form-label\",\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: true,\n                    type: \"email\",\n                    placeholder: \"Nh\\u1EADp email c\\u1EE7a b\\u1EA1n\",\n                    className: \"form-control\",\n                    onChange: e => setEmail(e.target.value),\n                    value: email\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"\",\n                    className: \"form-label\",\n                    children: \"M\\u1EADt kh\\u1EA9u\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      required: true,\n                      type: \"password\",\n                      placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u c\\u1EE7a b\\u1EA1n\",\n                      className: \"form-control password\",\n                      onChange: e => setPassword(e.target.value),\n                      value: password\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 270,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"\",\n                    className: \"form-label\",\n                    children: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 281,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    required: true,\n                    type: \"password\",\n                    className: \"form-control password\",\n                    placeholder: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u c\\u1EE7a b\\u1EA1n\",\n                    onChange: e => setConfirmPassword(e.target.value),\n                    value: confirmPassword\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"wrap-btn-login\",\n                  children: [error !== \"\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"error\",\n                    children: error\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 38\n                  }, this) : \"\" // <Route exact path='../Landing.js' component={Landing} />\n                  , /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn-login\",\n                    type: \"submit\",\n                    children: \"\\u0110\\u0103ng k\\xFD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 299,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: `header ${isActiveHeader ? \"active\" : \"\"}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header__wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header__logo\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/home\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"header__logo-text\",\n                children: \"PLANT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"header__logo-text-right\",\n                children: \"DISEASE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"header__nav-list\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/home\",\n              className: `header__nav-item ${pathname === \"/home\" && !isOpenModal ? \"active\" : \"\"}`,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"header__nav-right\",\n                children: \"Trang ch\\u1EE7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/du-doan\",\n              className: `header__nav-item ${pathname === \"/du-doan\" && !isOpenModal ? \"active\" : \"\"}`,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"header__nav-right header__nav-predict\",\n                children: \"D\\u1EF1 \\u0111o\\xE1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/forum\",\n              className: `header__nav-item ${pathname === \"/forum\" && !isOpenModal ? \"active\" : \"\"}`,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"header__nav-right\",\n                children: \"Di\\u1EC5n \\u0111\\xE0n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: `header__nav-sign header__nav-item ${isOpenModal}`,\n              onClick: () => {\n                if (!currentUser) {\n                  setIsOpenModal(true);\n                }\n              },\n              onDoubleClick: () => {\n                if (currentUser) {\n                  dispatch(logout());\n                  setIsOpenModal(true);\n                }\n              },\n              style: {\n                cursor: \"pointer\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `header__nav-right `,\n                children: currentUser ? \"Đăng xuất\" : \"Đăng nhập\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Header, \"LlHdfFV4PxMtLF6tTlJ6tjB/1Us=\", false, function () {\n  return [useSelector, useLocation, useHistory, useDispatch];\n});\n\n_c = Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["C:/Users/tgound/Desktop/NCKH/Web1/frontend/src/components/Header/index.js"],"names":["React","useState","useEffect","useRef","Link","useLocation","useHistory","useDispatch","useSelector","loginStart","loginSuccess","loginFailure","logout","Modal","axios","require","config","Header","isOpenModal","setIsOpenModal","currentUser","state","user","isActiveHeader","setIsActiveHeader","tabActive","setTabActive","lineRef","loginRef","pathname","handleOnScroll","scrollY","handleActiveTab","e","index","current","style","left","target","offsetLeft","width","offsetWidth","window","addEventListener","removeEventListener","history","email","setEmail","name","setName","error","setError","dispatch","loginHandler","preventDefault","console","log","headers","data","post","password","push","setPassword","confirmPassword","setConfirmPassword","CheckPassword","inputPassword","length","search","registerHandler","verified","alert","localStorage","setItem","JSON","stringify","err","value","cursor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  loginStart,\r\n  loginSuccess,\r\n  loginFailure,\r\n  logout,\r\n} from \"../../redux/userSlice\";\r\nimport \"./index.css\";\r\nimport { Modal } from \"../Modal\";\r\nimport axios from \"axios\";\r\n\r\nrequire(\"dotenv\").config();\r\n\r\nexport const Header = ({ isOpenModal, setIsOpenModal }) => {\r\n  const { currentUser } = useSelector((state) => state.user);\r\n  const [isActiveHeader, setIsActiveHeader] = useState(false);\r\n  const [tabActive, setTabActive] = useState(0);\r\n\r\n  const lineRef = useRef(null);\r\n  const loginRef = useRef(null);\r\n\r\n  const { pathname } = useLocation();\r\n\r\n  function handleOnScroll() {\r\n    if (this.scrollY > 120) {\r\n      setIsActiveHeader(true);\r\n    } else {\r\n      setIsActiveHeader(false);\r\n    }\r\n  }\r\n\r\n  const handleActiveTab = (e, index) => {\r\n    setTabActive(index);\r\n    lineRef.current.style.left = e.target.offsetLeft + \"px\";\r\n    lineRef.current.style.width = e.target.offsetWidth + \"px\";\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", handleOnScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleOnScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (lineRef.current) {\r\n      lineRef.current.style.left = loginRef.current.offsetLeft + \"px\";\r\n      lineRef.current.style.width = loginRef.current.offsetWidth + \"px\";\r\n    }\r\n  }, [isOpenModal]);\r\n\r\n  // *Code for LOGIN\r\n  const history = useHistory();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const dispatch = useDispatch();\r\n\r\n  const loginHandler = async (e) => {\r\n    e.preventDefault();\r\n    dispatch(loginStart());\r\n    console.log(\"Getting information from input\");\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          \"Content-type\": \"application/json\",\r\n        },\r\n      };\r\n      const { data } = await axios.post(\r\n        \"/api/users/login\",\r\n        {\r\n          email,\r\n          password,\r\n        },\r\n        config\r\n      );\r\n      console.log(\"Login successful, User information: \");\r\n      setIsOpenModal(false);\r\n      dispatch(loginSuccess(data));\r\n      history.push(\"/\");\r\n      console.log(data);\r\n      // localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n    } catch (error) {\r\n      console.log(error);\r\n      setError(\"Email hoặc mật khẩu không đúng, vui lòng thử lại\");\r\n      dispatch(loginFailure());\r\n      console.log(\"User not found, please check again or register\");\r\n    }\r\n  };\r\n\r\n  // *Code for REGISTER\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  function CheckPassword(inputPassword) {\r\n    if (inputPassword.length < 8) {\r\n      setError(\"Mật khẩu của bạn phải có độ dài từ 8 ký tự trở lên\");\r\n      console.log(\"Your password must be at least 8 characters\");\r\n      return false;\r\n    }\r\n    if (inputPassword.search(/[a-z]/i) < 0) {\r\n      setError(\"Mật khẩu của bạn phải có ít nhất một chữ cái\");\r\n      console.log(\"Your password must contain at least one letter.\");\r\n      return false;\r\n    }\r\n    if (inputPassword.search(/[0-9]/) < 0) {\r\n      setError(\"Mật khẩu của bạn phải có ít nhất một con số\");\r\n      console.log(\"Your password must contain at least one digit.\");\r\n      return false;\r\n    }\r\n    if (inputPassword.search(/[!@#$%^&*]/) > 0) {\r\n      setError(\"Mật khẩu của bạn không được chứa kí tự đặc biệt\");\r\n      console.log(\"Your password mustn't contain special character\");\r\n      return false;\r\n    } else return true;\r\n  }\r\n\r\n  const registerHandler = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (CheckPassword(password)) {\r\n      if (password !== confirmPassword) {\r\n        setError(\"Mật khẩu không khớp, vui lòng thử lại\");\r\n        console.log(\"Register failed because password not match\");\r\n      } else {\r\n        setError(null);\r\n        try {\r\n          const config = {\r\n            headers: {\r\n              \"Content-type\": \"application/json\",\r\n            },\r\n          };\r\n          const { data } = await axios.post(\r\n            \"/api/users\",\r\n            {\r\n              name,\r\n              email,\r\n              password,\r\n              verified: false,\r\n            },\r\n            config\r\n\r\n          );\r\n          console.log(\"Register successful\");\r\n          history.push(\"/\");\r\n          alert(\r\n            \"Một email đã được gửi đến hộp thư của bạn, vui lòng kiểm tra và kích hoạt tài khoản\"\r\n          );\r\n          // setIsLogin(true);\r\n          setIsOpenModal(false);\r\n          console.log(data);\r\n          localStorage.setItem(\"userInfo\", JSON.stringify(data));\r\n        } catch (err) {\r\n          console.log(err);\r\n          console.log(\"Register failed\");\r\n        }\r\n      }\r\n    } else {\r\n      console.log(\"Password requirement not meet\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal isOpen={isOpenModal} stateOpenModal={setIsOpenModal}>\r\n        <div className=\"modal__wrap-content\">\r\n          <div className=\"tabs\">\r\n            <div\r\n              className={`tab-item ${tabActive === 0 ? \"active\" : \"\"}`}\r\n              onClick={(e) => handleActiveTab(e, 0)}\r\n              ref={loginRef}\r\n            >\r\n              Đăng nhập\r\n            </div>\r\n            <div\r\n              className={`tab-item ${tabActive === 1 ? \"active\" : \"\"}`}\r\n              onClick={(e) => handleActiveTab(e, 1)}\r\n            >\r\n              Đăng ký\r\n            </div>\r\n            <div className=\"line\" ref={lineRef}></div>\r\n          </div>\r\n          <div className=\"panes\">\r\n            <div className=\"loginContainer\">\r\n              <form onSubmit={loginHandler}>\r\n                <div className={`pane-item ${tabActive === 0 ? \"active\" : \"\"}`}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"email\" className=\"form-label\">\r\n                      Email\r\n                    </label>\r\n                    <input\r\n                      required\r\n                      type=\"email\"\r\n                      className=\"form-control\"\r\n                      id=\"email\"\r\n                      placeholder=\"Nhập email của bạn\"\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                      value={email}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"password\" className=\"form-label\">\r\n                      Mật khẩu\r\n                    </label>\r\n                    <div>\r\n                      <input\r\n                        required\r\n                        type=\"password\"\r\n                        className=\"form-control password\"\r\n                        placeholder=\"Nhập mật khẩu của bạn\"\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        value={password}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <Link to=\"/forgot-password\">\r\n                    <div className=\"forget-password\">Quên mật khẩu?</div>\r\n                  </Link>\r\n                  <div className=\"wrap-btn-login\">\r\n                    {error !== \"\" ? <div className=\"error\">{error}</div> : \"\"}\r\n\r\n                    <button\r\n                      className=\"btn-login\"\r\n                      varian=\"primary\"\r\n                      type=\"submit\"\r\n                    >\r\n                      Đăng nhập\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n\r\n            <div className=\"registerContainer\">\r\n              <form onSubmit={registerHandler}>\r\n                <div className={`pane-item ${tabActive === 1 ? \"active\" : \"\"}`}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"\" className=\"form-label\">\r\n                      Tên người dùng\r\n                    </label>\r\n                    <input\r\n                      required\r\n                      type=\"text\"\r\n                      id=\"username\"\r\n                      placeholder=\"Nhập tên tài khoản của bạn\"\r\n                      className=\"form-control\"\r\n                      onChange={(e) => setName(e.target.value)}\r\n                      value={name}\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"email\" className=\"form-label\">\r\n                      Email\r\n                    </label>\r\n                    <input\r\n                      required\r\n                      type=\"email\"\r\n                      placeholder=\"Nhập email của bạn\"\r\n                      className=\"form-control\"\r\n                      onChange={(e) => setEmail(e.target.value)}\r\n                      value={email}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"\" className=\"form-label\">\r\n                      Mật khẩu\r\n                    </label>\r\n                    <div>\r\n                      <input\r\n                        required\r\n                        type=\"password\"\r\n                        placeholder=\"Nhập mật khẩu của bạn\"\r\n                        className=\"form-control password\"\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        value={password}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"\" className=\"form-label\">\r\n                      Nhập lại mật khẩu\r\n                    </label>\r\n                    <input\r\n                      required\r\n                      type=\"password\"\r\n                      className=\"form-control password\"\r\n                      placeholder=\"Nhập lại mật khẩu của bạn\"\r\n                      onChange={(e) => setConfirmPassword(e.target.value)}\r\n                      value={confirmPassword}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"wrap-btn-login\">\r\n                    {\r\n                      error !== \"\" ? <div className=\"error\">{error}</div> : \"\"\r\n                      // <Route exact path='../Landing.js' component={Landing} />\r\n                    }\r\n                    <button className=\"btn-login\" type=\"submit\">\r\n                      Đăng ký\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <header className={`header ${isActiveHeader ? \"active\" : \"\"}`}>\r\n        <div className=\"container\">\r\n          <div className=\"header__wrap\">\r\n            <div className=\"header__logo\">\r\n              <Link to=\"/home\">\r\n                <span className=\"header__logo-text\">PLANT</span>\r\n                <span className=\"header__logo-text-right\">DISEASE</span>\r\n              </Link>\r\n            </div>\r\n\r\n            <ul className=\"header__nav-list\">\r\n              <Link\r\n                to=\"/home\"\r\n                className={`header__nav-item ${pathname === \"/home\" && !isOpenModal ? \"active\" : \"\"\r\n                  }`}\r\n              >\r\n                <p className=\"header__nav-right\">Trang chủ</p>\r\n              </Link>\r\n              <Link\r\n                to=\"/du-doan\"\r\n                className={`header__nav-item ${pathname === \"/du-doan\" && !isOpenModal ? \"active\" : \"\"\r\n                  }`}\r\n              >\r\n                <p className=\"header__nav-right header__nav-predict\">Dự đoán</p>\r\n              </Link>\r\n              <Link\r\n                to=\"/forum\"\r\n                className={`header__nav-item ${pathname === \"/forum\" && !isOpenModal ? \"active\" : \"\"\r\n                  }`}\r\n              >\r\n                <p className=\"header__nav-right\">Diễn đàn</p>\r\n              </Link>\r\n\r\n              <li\r\n                className={`header__nav-sign header__nav-item ${isOpenModal}`}\r\n                onClick={() => {\r\n                  if (!currentUser) {\r\n                    setIsOpenModal(true);\r\n                  }\r\n                }}\r\n                onDoubleClick={() => {\r\n                  if (currentUser) {\r\n                    dispatch(logout());\r\n                    setIsOpenModal(true);\r\n                  }\r\n                }}\r\n                style={{ cursor: \"pointer\" }}\r\n              >\r\n                <p className={`header__nav-right `}>\r\n                  {currentUser ? \"Đăng xuất\" : \"Đăng nhập\"}\r\n                </p>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}